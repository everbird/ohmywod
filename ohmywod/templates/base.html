<!DOCTYPE html>
<html lang="en">
    <head>
        {% block head %}
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <link rel="stylesheet" href="{{ url_for('static', filename='css/bootstrap.min.css')}}">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/fontawesome.min.css" integrity="sha512-RvQxwf+3zJuNwl4e0sZjQeX7kUa3o82bDETpgVCH2RiwYSZVDdFJ7N/woNigN/ldyOOoKw8584jM4plQdt8bhA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
        <!-- Scrollbar Custom CSS -->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/malihu-custom-scrollbar-plugin/3.1.5/jquery.mCustomScrollbar.min.css">
        <title>{% block title %}{% endblock %} - WoD</title>
        <style type="text/css">
            #dismiss {
                width: 35px;
                height: 35px;
                position: absolute;
                /* top right corner of the sidebar */
                bottom: -15px;
                right: 0;
            }

            #content {
                min-width: 300px;
                width: calc(100% - 335px);
                min-height: 100vh;
                transition: all 0.6s cubic-bezier(0.945, 0.020, 0.270, 0.665);
                position: absolute;
                top: 0;
                right: 0;
            }

            #content.active {
                width: 100%;
            }

            .wrapper {
                display: flex;
                width: 100%;
            }

            #sidebar {
                width: 335px;
                position: fixed;
                top: 0;
                left: 0;
                height: 100vh;
                z-index: 999;
                transition: all 0.6s cubic-bezier(0.945, 0.020, 0.270, 0.665);
                transform-origin: center left; /* Set the transformed position of sidebar to center left side. */
            }

            #sidebar.active {
                margin-left: -335px;
            }

            #sidebarCollapse {
                width: 40px;
                height: 40px;
                background: #444;
                border-radius: 5px;
                border-width: 0px;
            }

            #sidebarCollapse span {
                width: 80%;
                height: 2px;
                margin: 0 auto;
                display: block;
                background: #fff;
                transition: all 0.8s cubic-bezier(0.810, -0.330, 0.345, 1.375);
            }

            #sidebarCollapse span:first-of-type {
                /* rotate first one */
                transform: rotate(45deg) translate(2px, 2px);
            }
            #sidebarCollapse span:nth-of-type(2) {
                /* second one is not visible */
                opacity: 0;
            }
            #sidebarCollapse span:last-of-type {
                /* rotate third one */
                transform: rotate(-45deg) translate(1px, -1px);
            }

            #sidebarCollapse.active span {
                /* no rotation */
                transform: none;
                /* all bars are visible */
                opacity: 1;
                margin: 5px auto;
            }

            @media (max-width: 768px) {
                #content {
                    min-width: 335px;
                    width: 100%;
                    margin-left: 0;
                    left: 0;
                    transition: all 0.6s cubic-bezier(0.945, 0.020, 0.270, 0.665);
                }

                #content.active {
                    width: calc(100% - 335px);
                    margin-left: 335px;
                }

                /* Reversing the behavior of the sidebar: 
       it'll be rotated vertically and off canvas by default, 
       collapsing in on toggle button click with removal of 
       the vertical rotation.   */
                #sidebar {
                    margin-left: -335px;
                    transform: rotateY(100deg);
                }
                #sidebar.active {
                    margin-left: 0;
                    transform: none;
                }

                /* Reversing the behavior of the bars: 
       Removing the rotation from the first,
       last bars and reappear the second bar on default state, 
       and giving them a vertical margin */
                #sidebarCollapse span:first-of-type,
                #sidebarCollapse span:nth-of-type(2),
                #sidebarCollapse span:last-of-type {
                    transform: none;
                    opacity: 1;
                    margin: 5px auto;
                }

                /* Removing the vertical margin and make the first and last bars rotate again when the sidebar is open, hiding the second bar */
                #sidebarCollapse.active span {
                    margin: 0 auto;
                }
                #sidebarCollapse.active span:first-of-type {
                    transform: rotate(45deg) translate(2px, 2px);
                }
                #sidebarCollapse.active span:nth-of-type(2) {
                    opacity: 0;
                }
                #sidebarCollapse.active span:last-of-type {
                    transform: rotate(-45deg) translate(1px, -1px);
                }
            }

             .scrolled-down{
                 transform:translateY(-100%); transition: all 0.3s ease-in-out;
             }
             .scrolled-up{
                 transform:translateY(0); transition: all 0.3s ease-in-out;
             }

        </style>
        {% endblock %}
    </head>
    <body>
        <div class="wrapper">
            <!-- Sidebar -->
            <nav id="sidebar" class="d-flex flex-column flex-shrink-0 p-3 text-white bg-dark">
                <div class="sidebar-header">
                    <h3>Oh my Wod</h3>
                </div>
                <hr>
                <ul class="nav nav-pills flex-column mb-auto">
                    <li class="nav-item">
                        <a href="/" class="nav-link" aria-current="page">
                            Home
                        </a>
                    </li>
                    <li>
                        <a href="{{ url_for('wodreport.report_page') }}" class="nav-link text-white">
                            All Reports
                        </a>
                    </li>
                </ul>
                <hr>
                <div id="sidebar_content">
                    {% block sidebar_content %}
<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
                    {% endblock %}
                </div>
                <hr>
                <div id="sidebar_ad" class="align-items-center">
                    {% block sidebar_ad%}
                    <div class="text-center">
                        <img src="https://placehold.jp/300x250.png"></img>
                    </div>
                    {% endblock %}
                </div>
                <hr>
                {% if not current_user or current_user.is_anonymous %}
                <div class="mr-4">
                    <i class="fa-solid fa-user me-2"></i>
                    <a href="{{ url_for("frontend.login") }}">Log in</a>
                </div>
                {% else %}
                <div class="dropdown mr-4">
                    <a href="#" class="d-flex align-items-center text-white text-decoration-none dropdown-toggle" id="dropdownUser1" data-bs-toggle="dropdown" aria-expanded="false">
                        <i class="fa-solid fa-user me-2"></i>
                        <strong>{{ current_user.username }}</strong>
                    </a>
                    <ul class="dropdown-menu dropdown-menu-dark text-small shadow" aria-labelledby="dropdownUser1" style="">
                        <li><a class="dropdown-item" href="{{ url_for("wodreport.new_category")  }}">New Category...</a></li>
                        <li><hr class="dropdown-divider"></li>
                        <li><a class="dropdown-item" href="{{ url_for("frontend.logout") }}">Sign out</a></li>
                    </ul>
                </div>
                {% endif %}
                <div id="dismiss" class="mr-4 text-end">
                    <a href="#" class="text-white text-decoration-none">
                        <i class="fa-solid fa-chevron-left"></i>
                    </a>
                </div>

            </nav>

            <div id="content">

                <nav class="navbar navbar-expand-lg navbar-dark bg-primary">

                    <div class="container-fluid">
                        <button type="button" id="sidebarCollapse" class="navbar-btn">
                            <span></span>
                            <span></span>
                            <span></span>
                        </button>

                    </div>
                </nav>
                <div id="right-content">{% block content %}{% endblock %}</div>

                <div id="footer">
                    {% block footer %}
                    <!-- Font Awesome JS -->
                    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/js/solid.min.js" integrity="sha512-dcTe66qF6q/NW1X64tKXnDDcaVyRowrsVQ9wX6u7KSQpYuAl5COzdMIYDg+HqAXhPpIz1LO9ilUCL4qCbHN5Ng==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
                    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/js/fontawesome.min.js" integrity="sha512-j3gF1rYV2kvAKJ0Jo5CdgLgSYS7QYmBVVUjduXdoeBkc4NFV4aSRTi+Rodkiy9ht7ZYEwF+s09S43Z1Y+ujUkA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
                    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.js"></script>
                    <!-- jQuery Custom Scroller CDN -->
                    <script src="https://cdnjs.cloudflare.com/ajax/libs/malihu-custom-scrollbar-plugin/3.1.5/jquery.mCustomScrollbar.concat.min.js"></script>
                    <script src="{{ url_for('static', filename='js/bootstrap.bundle.min.js') }}"></script>
                    <script>
                        $(document).ready(function () {

                            $("#sidebar").mCustomScrollbar({
                                theme: "minimal"
                            });

                            $("#dismiss").on('click', function () {
                                $('#sidebar, #content, #sidebarCollapse').toggleClass('active');
                            });
                            
                            $('#sidebarCollapse').on('click', function () {
                                $('#sidebar, #content').toggleClass('active');
                                $(this).toggleClass('active');
                            });

                        });
                    </script>
                    {% endblock %}
                </div>

            </div>
        </div>
    </body>
</html>
